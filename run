#!/bin/bash

export HADOOP_HOME=/home/h/halim/H3

function compile {
	rm -fr classes
	mkdir classes
	javac -cp /home/h/halim/H3/lib/commons-cli-1.2.jar:/home/h/halim/H3/codes:/home/h/halim/H3/hadoop-common-0.21.0.jar:/home/h/halim/H3/hadoop-mapred-0.21.0.jar:/home/h/halim/H3/hadoop-hdfs-0.21.0.jar -d classes \
		/home/h/halim/H3/codes/bfs/*.java \
		/home/h/halim/H3/codes/mf/*.java \
		/home/h/halim/H3/codes/ff0/*.java \
		/home/h/halim/H3/codes/ff1/*.java \
		/home/h/halim/H3/codes/ff2/*.java \
		/home/h/halim/H3/codes/ff3/*.java \
		/home/h/halim/H3/codes/ff4/*.java \
		/home/h/halim/H3/codes/ff5/*.java \
		/home/h/halim/H3/codes/ff6/*.java \
		/home/h/halim/H3/codes/ff8/*.java \
		/home/h/halim/H3/codes/*.java
	jar -cf mf.jar -C classes .
#	rm -fr classes
}

function website {
	java tojs < ${1}.txt > ${1}.js
	scp ${1}.txt felix@risci8.ddns.comp.nus.edu.sg:/home/felix/public_html/sws/SOCC10/website/runs_txt
	scp ${1}.js felix@risci8.ddns.comp.nus.edu.sg:/home/felix/public_html/sws/SOCC10/website/runs_js
}

function runmf {
	machine=m0001	# 0:access0-4; 1:sma0-11; 2:compsma35-50; 3:compg0-9
	algo=$1		# algorithm (pr, sp, spe)
	graph=$2	# input graph (fb, ak)
	tc=$3		# testcase (1:143, 2:395, 3:858, 4:3733)
	randss=$4	# how many super source and sinks?
	suffix=$5	# to append to the output filename
	nr=$6		# number of reducers
	elen=$7		# maximum excess paths length
	maxexcess=$8	# maximum number of excess paths
	usesink=$9	# use sink excess
	sbuf=10000
	N=5119685
				#0		1		2		3		4		5		6		7		8		9		10		11		12		13		14		15
	if [ $graph == "fb0" ]; then
		flow=(		1		2			4						8											16																					32																																											64																																																																																					128																																																																																																																																																																										)
		source=(	716533721       716533721,626229899     716533721,626229899,682084213,1032625243        716533721,626229899,682084213,1032625243,1004120030,685850478,645258171,687809821       716533721,626229899,682084213,1032625243,1004120030,685850478,645258171,687809821,544486963,1138636583,1067432176,711560165,723722988,686071413,618195691,1655177254    716533721,626229899,682084213,1032625243,1004120030,685850478,645258171,687809821,544486963,1138636583,1067432176,711560165,723722988,686071413,618195691,1655177254,718194675,1111480694,768859404,1314965922,527729496,1244354243,1059183205,751311913,502611333,835726925,781639750,1538333096,10123069,658864584,1433902923,1225817330		716533721,626229899,682084213,1032625243,1004120030,685850478,645258171,687809821,544486963,1138636583,1067432176,711560165,723722988,686071413,618195691,1655177254,718194675,1111480694,768859404,1314965922,527729496,1244354243,1059183205,751311913,502611333,835726925,781639750,1538333096,10123069,658864584,1433902923,1225817330,1354397972,557584068,552244677,1257615204,713096668,640631163,572634961,534542439,1066117689,515695868,732521129,562897140,545205671,526148732,1476130164,680224628,1269444016,1204416841,1383973135,1254205698,732473801,1593017676,590663275,778813273,592241135,1480360233,1579713917,597981541,721719783,581692989,1636647264,1248791705			716533721,626229899,682084213,1032625243,1004120030,685850478,645258171,687809821,544486963,1138636583,1067432176,711560165,723722988,686071413,618195691,1655177254,718194675,1111480694,768859404,1314965922,527729496,1244354243,1059183205,751311913,502611333,835726925,781639750,1538333096,10123069,658864584,1433902923,1225817330,1354397972,557584068,552244677,1257615204,713096668,640631163,572634961,534542439,1066117689,515695868,732521129,562897140,545205671,526148732,1476130164,680224628,1269444016,1204416841,1383973135,1254205698,732473801,1593017676,590663275,778813273,592241135,1480360233,1579713917,597981541,721719783,581692989,1636647264,1248791705,1327212455,1359114766,582261107,584504260,1365284363,1001107258,1019809659,1678384182,1592111836,1685011450,775114010,1069896478,1224431180,861855520,1395275263,587639252,742991473,1175779887,1679269794,1318254693,1667737286,537588029,749395480,706942977,1531927886,1130262891,829830306,1192455774,630628114,1416158399,523010976,1315120975,607746288,1301035722,1060673987,1511973075,602778746,834545410,1037765265,557767947,773735351,1040655047,1446979757,1353741954,1460430488,548579504,1143219227,695530878,1547870121,1565468349,726556055,1061700147,1019011209,1197455790,1432817737,1328168940,1064594103,1371331765,1033696751,1407050434,618378762,1145966184,773141003,1572676192		)
		sink=(		1450134139      1450134139,1432970295   1450134139,1432970295,1308434618,640742870      1450134139,1432970295,1308434618,640742870,740773244,586107999,594322254,1067420971     1450134139,1432970295,1308434618,640742870,740773244,586107999,594322254,1067420971,1463953567,1275843849,760540347,634930347,1011654177,579959951,567062346,1500607852 1450134139,1432970295,1308434618,640742870,740773244,586107999,594322254,1067420971,1463953567,1275843849,760540347,634930347,1011654177,579959951,567062346,1500607852,1233847298,540331490,1525872392,613029204,634696311,1498440104,578527558,1408427825,1445418659,619273304,1531145701,584067862,1367115017,708412244,1060047804,1364382889        1450134139,1432970295,1308434618,640742870,740773244,586107999,594322254,1067420971,1463953567,1275843849,760540347,634930347,1011654177,579959951,567062346,1500607852,1233847298,540331490,1525872392,613029204,634696311,1498440104,578527558,1408427825,1445418659,619273304,1531145701,584067862,1367115017,708412244,1060047804,1364382889,1534074335,1566390068,533628152,669038741,696519872,1301695558,1212006684,1510800635,1141599611,1320140171,1389210242,506958138,667495339,720257170,1266483331,1129429718,1576481120,1430720738,1140166577,704453216,600782457,615378910,830351664,649109109,507157049,694584620,540911963,1080583971,1265201579,567449892,1275741511,631905983        1450134139,1432970295,1308434618,640742870,740773244,586107999,594322254,1067420971,1463953567,1275843849,760540347,634930347,1011654177,579959951,567062346,1500607852,1233847298,540331490,1525872392,613029204,634696311,1498440104,578527558,1408427825,1445418659,619273304,1531145701,584067862,1367115017,708412244,1060047804,1364382889,1534074335,1566390068,533628152,669038741,696519872,1301695558,1212006684,1510800635,1141599611,1320140171,1389210242,506958138,667495339,720257170,1266483331,1129429718,1576481120,1430720738,1140166577,704453216,600782457,615378910,830351664,649109109,507157049,694584620,540911963,1080583971,1265201579,567449892,1275741511,631905983,1679251927,737165159,594414309,847499792,593018471,1071030411,1202856305,591156427,558609903,682986880,1314614582,1280590066,1312223120,1252479993,670266988,1645747478,1342772030,691878807,1260851695,1439157618,1251154097,1344307871,584106054,717111377,838903710,1596107746,1131076667,1024961952,678652328,508227554,634836263,704227757,547953239,1482319966,609891077,1594154555,508091507,582397557,1032491807,1294399373,599813900,1389601230,1341211906,1015151980,1311176556,1422767358,1026840346,564104325,527765163,1493538508,560824799,1131829720,622962727,1050339501,1653672134,1049741305,1222009301,1120795049,1191114736,1501768239,742849909,1380031378,1532062063,514232886		)

		flow=(		143		395		858		3733		1203		1328		1031		1012		994		1061		2964		4108		4064		890		1857		28508	)
		source=(	1286936144	1040067342	1616749690	1244354243	715113270	1023626240	815365334	815395409	769433317	733842082	1071030411	835726925	1059183205	851439453	1098708146	1286936144,1040067342,1616749690,1244354243,715113270,1023626240,815365334,815395409,769433317,733842082,1071030411,835726925,1059183205,851439453,1098708146	)
		sink=(		722739327 	502448077	1368126973	523010976	721899508	747018277	746209016	836211725	1023671694	1004736060	850445073	1024961952	820154258	1004120030	819558303	722739327,502448077,1368126973,523010976,721899508,747018277,746209016,836211725,1023671694,1004736060,850445073,1024961952,820154258,1004120030,819558303	)

	elif [ $graph == "fb1x" ]; then #FB0- dbyy 
		flow=(		1386		)
		source=(	501235129	)
#		sink=(		1032625243	)
		sink=(		6232393,9121423,9407751,20801119,33000813,38311044,48608310,48608379,55301355,69704200,177400534,185006666,206700346,501286552,501368335,502795058,503003563,504212147,505662524,505843341,507326475,507768819,508103052,508157331,508587942,509531394,509797583,509894562,510274419,512074367,512587684,512718797,512777436,513192203,513206805,513262509,514267939,514268516,514330366,514690555,514889626,516622397,517032949,517093375,518728543,519508599,520566755,521309188,521542581,521677655,522295797,522930165,523912517,525088947,525749533,525968488,526197556,527713436,528510256,528973628,529554055,532348772,532496330,532984731,533628152,534229558,534420427,534542439,534554082,534601194,534776080,534843550,535330164,536042471,537154133,538263959,539050290,539817874,540130383,540911963,540943897,541437975,541635828,541710429,541902997,542046009,543875681,544005903,545205671,545472300,545513219,546399260,546934921,547282357,547389660,547701666,547789262,548640050,548688767,548798430,550109394,550186252,550215347,550353722,552467102,553284922,553295079,554189700,554212387,554438834,554577869,555171721,555481212,555740776,557007785,567449892,597324144,684765227,699805283,717111377,753341927,771753381,1032625243,1035014891,1289458825,1355756205,1493538508,1553342939	)

	elif [ $graph == "fb1" ]; then #FB1 - generated by FF6
		flow=(		84			3054				354820		)
		source=(	521500027	3402719				3402719,17009010,25705309,34703301,36914792,75501663,166600037,500592778,501235129,501763280,502359492,502611333,502786401,503254103,503280186,503569285,505265847,506403449,506958138,507157049,507290754,507408851,508606405,508639546,508909358,510211737,512840771,513017507,513191943,514199667,514221065,514232688,514898849,515226607,515339559,515695868,516062583,516312792,516521111,517354029,518175894,518255153,518555489,518590636,519116533,519967829,520389411,520565881,520611107,520957452,521032219,521537771,521833700,522799581,522963513,523010976,523927169,524565337,525188890,525688743,526250204,526292772,526489596,527101935,527465758,527643417,527765163,528632108,529255969,529969656,530906574,531342576,531675411,532492053,533814210,534379156,534667406,534914683,535167690,535378917,536097279,536353099,536868946,537393604,537588029,537871996,538421133,540331490,540965861,542595980,543575293,544098704,544486963,545330539,546950193,547109143,547316035,547486484,547953239,548015663,548098832,548955849,549214665,550369389,551012396,551039139,551184708,552244677,552623491,552706587,552872164,553630635,553650848,554034487,554039505,554545249,554548261,554671000,555273585,556126386,579293868,581692989,621338132,642133097,744841044,750748175,1557495128,1642045069	)
		sink=(		6232393		6232393				6232393,9121423,9407751,20801119,33000813,38311044,48608310,48608379,55301355,69704200,177400534,185006666,206700346,501286552,501368335,502795058,503003563,504212147,505662524,505843341,507326475,507768819,508103052,508157331,508587942,509531394,509797583,509894562,510274419,512074367,512587684,512718797,512777436,513192203,513206805,513262509,514267939,514268516,514330366,514690555,514889626,516622397,517032949,517093375,518728543,519508599,520566755,521309188,521542581,521677655,522295797,522930165,523912517,525088947,525749533,525968488,526197556,527713436,528510256,528973628,529554055,532348772,532496330,532984731,533628152,534229558,534420427,534542439,534554082,534601194,534776080,534843550,535330164,536042471,537154133,538263959,539050290,539817874,540130383,540911963,540943897,541437975,541635828,541710429,541902997,542046009,543875681,544005903,545205671,545472300,545513219,546399260,546934921,547282357,547389660,547701666,547789262,548640050,548688767,548798430,550109394,550186252,550215347,550353722,552467102,553284922,553295079,554189700,554212387,554438834,554577869,555171721,555481212,555740776,557007785,567449892,597324144,684765227,699805283,717111377,753341927,771753381,1032625243,1035014891,1289458825,1355756205,1493538508,1553342939	)
	elif [ $graph == "fb2" ]; then #FB2 - generated by FF6
		flow=(		457633		)
		source=(	9322460,501763280,503112502,504405054,508950426,529763010,537432812,550688713,560074445,561243969,567670240,570439483,572819248,580250161,597864487,605079923,606584310,618505911,635693404,639755648,645154261,661304164,670591768,674477068,681795116,687373585,688850804,702973858,706470759,709946576,718861599,736794185,737631312,738145651,738906826,749585005,779385849,791198800,799450060,826860252,862415531,1001107258,1004566962,1007654065,1019497856,1027755499,1033696751,1035526989,1039465200,1054933303,1063478134,1072226002,1077155091,1078442317,1107207744,1110391163,1125308937,1140166577,1153123319,1156304182,1156925974,1157259022,1164578291,1194825975,1198380698,1215588605,1224752919,1224925089,1227750871,1235437070,1249479206,1250927328,1252479993,1255112001,1293729527,1303304289,1306068009,1322820589,1326075975,1329953466,1337983509,1347246060,1364312028,1370499365,1375082651,1394267530,1394272480,1394892248,1396881744,1422783551,1423202636,1432881707,1436573412,1440246913,1446810980,1454422238,1458553646,1463077407,1468244784,1469485468,1472239872,1473395876,1479954183,1482548335,1486890428,1494136914,1518846894,1526563234,1533470554,1574747238,1588351784,1595465325,1595692716,1602275355,1603722507,1607863483,1614987807,1634558134,1636771310,1655323500,1659161119,1661061188,1665488871,1668531688	)
		sink=(		9121423,508875313,513192203,520119938,538147734,545472300,553295079,557594603,558185689,572075579,578734543,579337225,582525101,583082535,584106054,585259036,602565332,607799783,609673783,618182405,623182948,629017801,636588306,643779771,648621001,670174352,675019221,681175230,681930889,682847436,688953985,698658589,698702848,700146968,706855190,716792145,727192902,727958871,730849546,746322485,794831877,818740033,860430076,886365264,904255601,1002867470,1013390746,1014953002,1029321955,1043760012,1043974027,1047501047,1061898889,1070250865,1074288489,1074664900,1074734575,1100611518,1134568026,1138836318,1141897524,1142746879,1160827683,1164526269,1171180544,1185493366,1196761811,1208921554,1211760226,1218906301,1221322878,1239077104,1240271553,1256757356,1269284177,1279051403,1285410323,1301702293,1308411983,1316476884,1323391576,1325288206,1326757428,1343464370,1346730474,1346910380,1357066537,1382466456,1393802038,1416185390,1417028456,1421907495,1429041415,1435115974,1437957993,1441993402,1444149728,1456535037,1472330667,1479025094,1479646044,1480306979,1484389626,1487661340,1498440104,1508029169,1511796779,1516830206,1519058601,1537959540,1551314173,1556941771,1559412694,1588244881,1595126037,1597448496,1598814763,1616665857,1623864313,1630356767,1635014654,1642788443,1663521110,1665529077,1668187938,1668441266	)
	elif [ $graph == "fb3" ]; then #FB3 - generated by FF6
		flow=(		450321		)
		source=(	1003193,1230174,11202663,20603093,77600259,78802531,133100738,502101785,503425715,507106790,507398501,510756306,512894475,516086447,521281625,544135193,567187633,569268658,579761685,585921384,611316345,612236858,616537353,629017801,635515499,643035321,643709166,650404427,656180837,667768973,670266988,686120230,687537086,687866778,690021548,701660642,703510665,706942977,709443119,717387884,721430446,725856778,729717908,742820351,749678396,756086491,770340991,774218583,782179771,790693797,811384654,813386701,836448356,868170390,882195719,890635257,1002988033,1004513865,1014137058,1018639556,1037810106,1045103742,1068007740,1095273553,1096321731,1107008469,1107176804,1120683513,1142151408,1142251701,1147335617,1147594006,1152014813,1160251952,1176909548,1181268474,1184830595,1185772218,1190216125,1192754537,1193373868,1194577745,1196713706,1198028513,1198326288,1216535960,1220160942,1222785487,1237170859,1260556549,1269567495,1296068328,1308215725,1330614652,1340114467,1344307871,1345222026,1374604872,1382945282,1410188033,1412498840,1412959092,1416284014,1432070820,1439637115,1450071336,1452623179,1455308118,1461528384,1472330667,1473280331,1480360233,1481155036,1486363174,1502685322,1511195939,1530764302,1538344680,1543031083,1581674119,1639297377,1655475856,1659225500,1660598941,1664762621,1665708413,1682640175	)
		sink=(		1705773,2202502,31500675,149400239,502186155,505663108,506937395,508875313,513206805,514889626,522930165,533025040,535750140,537697040,541607026,543875681,550587062,554545249,568096461,569445129,578872376,593887905,600325024,603160660,605755870,607332428,617191303,621639595,626104277,631629223,632219124,642133097,676630859,677937783,692463446,693841281,698826632,706780542,712184602,726808288,728204313,745528763,750013187,756933369,763445227,772068568,774950178,778987852,823237231,826789534,830470007,896485704,902295108,1007876129,1013540329,1016839101,1022831495,1026999361,1032859662,1034374632,1057015618,1064951185,1066117689,1081465698,1089466178,1095634122,1109897387,1121583940,1122017031,1127152444,1127167134,1135567319,1136864244,1137742895,1140649615,1147551343,1151199093,1153252152,1159759908,1167035041,1178864606,1183970441,1185427538,1210137339,1211605462,1211801917,1217401850,1217830513,1226554473,1229948956,1275843849,1277897778,1293729527,1294520372,1303590238,1305006618,1309425862,1316493906,1323712164,1360011369,1371296964,1381017510,1386532083,1390698724,1424151233,1456261121,1467067391,1489468362,1509054163,1510541055,1525872392,1547131745,1551084031,1552110327,1561423794,1564292834,1597545799,1623663145,1625541688,1634146510,1646514539,1656017877,1660577084,1663281621,1667588032	)
	elif [ $graph == "fb4" ]; then #FB4 - generated by FF6
		flow=(		476310		)
		source=(	3402719,17009010,25705309,34703301,36914792,75501663,166600037,500592778,501235129,501763280,502359492,502611333,502786401,503254103,503280186,503569285,505265847,506403449,506958138,507157049,507290754,507408851,508606405,508639546,508909358,510211737,512840771,513017507,513191943,514199667,514221065,514232688,514898849,515226607,515339559,515695868,516062583,516312792,516521111,517354029,518175894,518255153,518555489,518590636,519116533,519967829,520389411,520565881,520611107,520957452,521032219,521537771,521833700,522799581,522963513,523010976,523927169,524565337,525188890,525688743,526250204,526292772,526489596,527101935,527465758,527643417,527765163,528632108,529255969,529969656,530906574,531342576,531675411,532492053,533814210,534379156,534667406,534914683,535167690,535378917,536097279,536353099,536868946,537393604,537588029,537871996,538421133,540331490,540965861,542595980,543575293,544098704,544486963,545330539,546950193,547109143,547316035,547486484,547953239,548015663,548098832,548955849,549214665,550369389,551012396,551039139,551184708,552244677,552623491,552706587,552872164,553630635,553650848,554034487,554039505,554545249,554548261,554671000,555273585,556126386,579293868,581692989,621338132,642133097,744841044,750748175,1557495128,1642045069	)
		sink=(		6232393,9121423,9407751,20801119,33000813,38311044,48608310,48608379,55301355,69704200,177400534,185006666,206700346,501286552,501368335,502795058,503003563,504212147,505662524,505843341,507326475,507768819,508103052,508157331,508587942,509531394,509797583,509894562,510274419,512074367,512587684,512718797,512777436,513192203,513206805,513262509,514267939,514268516,514330366,514690555,514889626,516622397,517032949,517093375,518728543,519508599,520566755,521309188,521542581,521677655,522295797,522930165,523912517,525088947,525749533,525968488,526197556,527713436,528510256,528973628,529554055,532348772,532496330,532984731,533628152,534229558,534420427,534542439,534554082,534601194,534776080,534843550,535330164,536042471,537154133,538263959,539050290,539817874,540130383,540911963,540943897,541437975,541635828,541710429,541902997,542046009,543875681,544005903,545205671,545472300,545513219,546399260,546934921,547282357,547389660,547701666,547789262,548640050,548688767,548798430,550109394,550186252,550215347,550353722,552467102,553284922,553295079,554189700,554212387,554438834,554577869,555171721,555481212,555740776,557007785,567449892,597324144,684765227,699805283,717111377,753341927,771753381,1032625243,1035014891,1289458825,1355756205,1493538508,1553342939	)
	elif [ $graph == "fb7" ]; then #FB7 - generated by FF6
		flow=(		493872		)
		source=(	-418525886,-387123850,-189351039,-153593497,-98741467,-95722900,-75511280,-70211007,-60173674,-53702187,-21684497,-16000297,-11816311,25711316,133001445,157700526,508272298,509757874,511862050,522695832,523681149,523863082,537154133,538678919,544135193,548039325,549718857,552870891,558489915,565181682,566497305,566883800,567670240,572091844,578413492,609673783,625757636,628163732,631629223,643120880,668774321,670889810,672255522,678103745,681604250,684804522,692630194,698587243,728542456,740545411,750055708,756933369,758289100,780507362,786410054,799498188,807609235,1006005840,1018209499,1033749589,1048905860,1057184313,1062799600,1093311814,1094524999,1103432730,1107438930,1121197143,1139503901,1142604398,1158186078,1158532205,1179550346,1180848179,1204686515,1207306972,1208921554,1214288774,1219185955,1234418577,1253221748,1264896349,1265162441,1274154805,1275918242,1283975478,1304786531,1309855628,1310352335,1313397664,1323524420,1333353874,1343000101,1344535468,1348433049,1355582470,1374145881,1380967979,1395360639,1414716981,1433619888,1473139188,1479740602,1481289059,1481568979,1492046687,1500930524,1505973036,1516040659,1533963160,1554822576,1555842705,1575584232,1585788450,1588375315,1608231016,1609547422,1628456237,1636800997,1640084382,1644710748,1659922973,1667517000,1670168546,1670290830,1741536863,1790659500,1803849579	)
		sink=(		-556421911,-479652178,-362865803,-287417805,-224551867,-195645735,-152942200,-140800297,-76620571,-53455855,-50128081,-21670097,-16912772,9435017,18712739,18914909,23417285,174501209,509914597,512890212,515631600,526197556,531206751,535135223,539062200,547042535,573714901,574480521,580580260,589945033,592902404,600373740,627513043,630628114,660339443,671407587,671621174,680451171,694819749,703510665,713693096,715061589,715157261,719203530,719731478,725142329,755707930,762364246,769212884,794412137,826939215,1010646791,1022170403,1033644341,1040492373,1110567903,1122379434,1126630265,1128836688,1133592765,1135579055,1143023729,1161440913,1167649810,1175779887,1176211671,1190427922,1213201360,1214015068,1214745640,1225440362,1238319363,1238919950,1255922238,1268048266,1270171904,1286535159,1291446538,1310372293,1317497117,1318654261,1319497703,1320552803,1322654704,1337437771,1344334141,1346739221,1347349758,1354341224,1356880884,1361971826,1375404460,1378771004,1398491485,1442678057,1455079919,1460430488,1464655025,1475599227,1479750536,1499008049,1499859946,1506454221,1508687478,1519932305,1524897488,1530764302,1546621950,1550690361,1558690559,1573111744,1580774795,1588351784,1590858494,1602872132,1606560511,1623864313,1627935678,1637044080,1641991480,1660598941,1665831413,1741381020,1776263526,1791187204,1809955593,1825367178,1839202612	)
	elif [ $graph == "fb8" ]; then #FB8 - generated by FF6
		flow=(		512366		)
		source=(	-880086313,-755252843,-680795725,-627904205,-457369637,-455280487,-428225462,-332296026,-178318178,-128387800,-63259274,-57693953,-50704731,-36968698,-30416683,-22212448,-20813916,508465,4703843,25805526,503709301,514095120,514719142,516388971,531434736,531858871,541476303,547058658,558377380,575866070,581492696,582078862,622741749,624700658,633690449,686658459,697935548,710158310,711961987,713809120,730240437,736881018,754473841,757847838,771749905,772068568,785074427,785838451,786799688,838672574,1004585328,1009057681,1020935144,1025187301,1031587491,1033639672,1037560667,1041619728,1042363878,1061994485,1065207227,1098867914,1105892825,1111507422,1140065527,1143219227,1169855814,1170792618,1175779887,1185776937,1190427776,1193373868,1197620527,1207711534,1237155926,1243794158,1248181199,1252753243,1257652054,1269484700,1274472111,1278872710,1321845950,1323519864,1326294971,1327732107,1336175554,1344605712,1357405563,1373411810,1386376823,1387928139,1393710094,1406954318,1419279192,1425544238,1452064377,1475086221,1484391244,1487387496,1491151290,1495382012,1495683897,1499922181,1506580219,1522308050,1526453782,1541897145,1542972799,1568117516,1605369726,1615149328,1615533496,1623282941,1636640284,1636641305,1643273040,1657470109,1669958286,1708617694,1710949241,1723105762,1805268084,1806298198,1808760792,1822057369	)
		sink=(		-708353063,-443553673,-416616199,-408043081,-368615237,-322926076,-316752567,-303407131,-300911358,-278118635,-239623986,-143898685,-110538861,-60555180,-59718018,-57162540,-49204900,-42372633,-19733601,-17568370,-16804617,1938603,6831704,75100183,83401519,504507194,506427380,511862050,514263196,528570538,532452319,533025040,533585252,564010758,568128860,569733678,572457191,578499196,578965024,583962113,594717280,596248011,597145916,610242092,617952180,651038763,652700692,654502456,682109581,695876748,700912891,702068454,706906019,715755233,721076726,723607613,727681047,740456674,742988918,838903710,1000651753,1004605639,1020520117,1029870428,1030784064,1041921015,1045888516,1049013807,1053781837,1078591370,1088754356,1094261792,1098971058,1112100795,1123508691,1160513945,1169066112,1177695983,1180848179,1197505840,1221099462,1221926429,1229823721,1261268606,1272541208,1309855628,1330370687,1343442592,1358988777,1365166343,1394997803,1406448495,1416480132,1426087234,1454536641,1463787874,1465491581,1469496804,1472571346,1482573934,1489848367,1509920334,1519260865,1523394842,1532647097,1534235186,1538165150,1558638360,1565631024,1565786710,1589525418,1597252489,1609658138,1618522101,1628210842,1629746399,1636701864,1652191917,1660749489,1668496753,1692807736,1756288318,1787102436,1809182756,1829754191,1830928693,1841531775,1846848124	)


	elif [ $graph == "fb1" ] || [ $graph == "fb2" ] || [ $graph == "fb3" ] || [ $graph == "fb4" ] || [ $graph == "fb5" ] || [ $graph == "fb6" ] || [ $graph == "fbx7" ]; then #FB2 - db15
		flow=(		262134																																																																																																																																																																																																								17382																																																																																																																																																													80240	)
		source=(	543038117,551039139,581692989,517032949,527387290,501286552,579293868,554111492,526489596,521392776,1668200796,20800797,524565337,514268516,555793542,548579504,119300724,547058658,537432812,567449892,534767652,521537771,532348772,556126386,544407157,544486963,512718797,572634961,20801119,551696972,527101935,552066670,548098832,519090554,509797583,526280152,507768819,552858978,549770751,550369389,183501412,1035014891,615602152,538263959,540628690,539230388,10123069,520389411,699805283,554034487,534667406,547211402,502295864,1063478134,545472300,514684747,549332981,547789262,525968488,548907795,518255153,513191943,546862375,522295797,525088947,771753381,519967829,521051751,508091507,548688767,510211737,556894288,527819653,1032625243,540331490,1493538508,531675411,513017507,534554082,547282357	530294889,540273962,503843738,513258001,543698735,204503631,81009977,518673758,515197216,512989988,502510080,16909217,522098445,512459404,503494555,540264725,549405338,520786774,555583835,552327050,545106229,509136001,542973503,503130482,542973095,507061554,546653030,504804704,504464486,29910775,513073602,544795394,10712237,555768310,513800363,543338491,536710710,526116645,539818280,223809,30602422,525706851,1023770899,516438380,519661462,543475883,13733406,505265322,538308803,505829065,507178029,518940557,526643596,545805761,1514814604,508773845,2541506,554345025,520606780,551163982,514742176,552178041,510082696,12303162	530753215,214008,555715189,507855844,550981841,501760542,552670164,305157,521897871,772693704,69704177,535311517,554246200,530168059,533505459,500561568,522407375,55201970,502290165,1000701,501395298,542178233,516932236,125100332,514100726,215000100,555273088,505413833,523589566,511185001,215000892,529912381,543574090,508845960,555023480,554516360,534554082,541886068,532538913,532735121,536832071,505331665,554446187,543106221,542968482,550906392,515292345,529301338,546909405,7023427,185200413,502193950,542925997,37201087,521495095,527347225,505811455,534133857,544226929,556679565,22606844,531298625,500656395,506676486	)
		sink=(		523366209,524414768,541538760,515012030,126612,541710429,548015663,507408851,547285377,3429443,83502502,552872164,539817874,552244677,734012958,75501663,502786401,509093146,513192203,536868946,1034751117,534843550,547953239,509169261,527465758,552358051,521299042,546632771,546484821,514823562,527713436,547316035,546934921,545205671,537588029,514232886,549630786,514232688,523010976,508227554,527729496,548815400,527643417,504212147,515097746,526703823,521833700,554039505,553295079,512777436,529255969,750748175,1345974405,509769368,512074367,523927169,537722886,536097279,534229558,732559808,546399260,521656227,507106790,595764322,20800603,533922116,535167690,547202154,520566755,552467102,506958138,540130383,505265847,540911963,546754724,700729571,548824051,545845944,55301355,508950426			20604573,518985847,534017934,26900692,2541953,547282907,518121687,51601756,2520682,531196339,525208083,505802099,4204331,507639704,2064738,543158402,557288855,538500462,545866750,65200195,521301182,515766659,514800399,545738048,527417867,557233699,545649911,530775569,510488245,524357107,513635066,549545455,506371104,538758404,509689643,508000369,514850663,11902817,514522480,533897646,517599202,504782126,538017522,211600043,103173,508266963,551305519,535843992,1002716,512934807,505923567,505129054,520284817,531782770,542938142,509293713,13803579,32807955,538541423,500054656,516150979,550337336,16100992,549913959				547662648,9631565,14218082,503509080,535327091,227700001,509328730,503781210,7610499,501546150,501241260,5403395,51601449,547249736,521716663,592936110,513573681,527188665,63205548,533609547,540554289,19901946,540296586,553869900,508573052,545820173,529255969,536649028,547353550,507213384,539873750,600298049,515731546,752900721,516784721,530692631,518050551,525880253,544277503,503370802,516287065,515843064,177400745,1345974405,509899442,507039938,556239126,546114424,514516324,521244842,541853164,520779439,510852247,215600295,547202154,530487704,503189177,545130765,511089229,522921887,552233864,509369937,80600271,3207044	)

	elif [ $graph == "fb1" ] || [ $graph == "fb2" ] || [ $graph == "fb3" ]; then #FB2 - db15
		#for FB1+
		flow=(		1		2			4					8										16																				32																																								64																																																																																	128																																																																																																																																																																)
		source=(	543038117	543038117,551039139	543038117,551039139,581692989,517032949	543038117,551039139,581692989,517032949,527387290,501286552,579293868,554111492	543038117,551039139,581692989,517032949,527387290,501286552,579293868,554111492,526489596,521392776,1668200796,20800797,524565337,514268516,555793542,548579504	543038117,551039139,581692989,517032949,527387290,501286552,579293868,554111492,526489596,521392776,1668200796,20800797,524565337,514268516,555793542,548579504,119300724,547058658,537432812,567449892,534767652,521537771,532348772,556126386,544407157,544486963,512718797,572634961,20801119,551696972,527101935,552066670	543038117,551039139,581692989,517032949,527387290,501286552,579293868,554111492,526489596,521392776,1668200796,20800797,524565337,514268516,555793542,548579504,119300724,547058658,537432812,567449892,534767652,521537771,532348772,556126386,544407157,544486963,512718797,572634961,20801119,551696972,527101935,552066670,548098832,519090554,509797583,526280152,507768819,552858978,549770751,550369389,183501412,1035014891,615602152,538263959,540628690,539230388,10123069,520389411,699805283,554034487,534667406,547211402,502295864,1063478134,545472300,514684747,549332981,547789262,525968488,548907795,518255153,513191943,546862375,522295797		543038117,551039139,581692989,517032949,527387290,501286552,579293868,554111492,526489596,521392776,1668200796,20800797,524565337,514268516,555793542,548579504,119300724,547058658,537432812,567449892,534767652,521537771,532348772,556126386,544407157,544486963,512718797,572634961,20801119,551696972,527101935,552066670,548098832,519090554,509797583,526280152,507768819,552858978,549770751,550369389,183501412,1035014891,615602152,538263959,540628690,539230388,10123069,520389411,699805283,554034487,534667406,547211402,502295864,1063478134,545472300,514684747,549332981,547789262,525968488,548907795,518255153,513191943,546862375,522295797,525088947,771753381,519967829,521051751,508091507,548688767,510211737,556894288,527819653,1032625243,540331490,1493538508,531675411,513017507,534554082,547282357,550109394,621338132,534776080,506660540,526148732,48608310,550055648,90409920,514330366,554548261,1642045069,6232393,508249440,537736362,521032219,514539537,529969656,528138312,515339559,501763280,533960693,509531394,554841438,510274419,542453173,534420427,784684231,507157049,531840962,552189819,541757052,551184708,502786586,507326475,516062583,553226496,548955849,5220166,547701666,527276449,553284922,166600037,514898849,547109143,553650848,3402719,542046009,551273947	)
		sink=(		523366209	523366209,524414768	523366209,524414768,541538760,515012030	523366209,524414768,541538760,515012030,126612,541710429,548015663,507408851	523366209,524414768,541538760,515012030,126612,541710429,548015663,507408851,547285377,3429443,83502502,552872164,539817874,552244677,734012958,75501663	523366209,524414768,541538760,515012030,126612,541710429,548015663,507408851,547285377,3429443,83502502,552872164,539817874,552244677,734012958,75501663,502786401,509093146,513192203,536868946,1034751117,534843550,547953239,509169261,527465758,552358051,521299042,546632771,546484821,514823562,527713436,547316035	523366209,524414768,541538760,515012030,126612,541710429,548015663,507408851,547285377,3429443,83502502,552872164,539817874,552244677,734012958,75501663,502786401,509093146,513192203,536868946,1034751117,534843550,547953239,509169261,527465758,552358051,521299042,546632771,546484821,514823562,527713436,547316035,546934921,545205671,537588029,514232886,549630786,514232688,523010976,508227554,527729496,548815400,527643417,504212147,515097746,526703823,521833700,554039505,553295079,512777436,529255969,750748175,1345974405,509769368,512074367,523927169,537722886,536097279,534229558,732559808,546399260,521656227,507106790,595764322		523366209,524414768,541538760,515012030,126612,541710429,548015663,507408851,547285377,3429443,83502502,552872164,539817874,552244677,734012958,75501663,502786401,509093146,513192203,536868946,1034751117,534843550,547953239,509169261,527465758,552358051,521299042,546632771,546484821,514823562,527713436,547316035,546934921,545205671,537588029,514232886,549630786,514232688,523010976,508227554,527729496,548815400,527643417,504212147,515097746,526703823,521833700,554039505,553295079,512777436,529255969,750748175,1345974405,509769368,512074367,523927169,537722886,536097279,534229558,732559808,546399260,521656227,507106790,595764322,20800603,533922116,535167690,547202154,520566755,552467102,506958138,540130383,505265847,540911963,546754724,700729571,548824051,545845944,55301355,508950426,582525101,500592778,503444018,521281625,531342576,717111377,554577869,550353722,504140210,506403449,656180837,554613929,525688743,502703122,542212193,508587942,539204638,547389660,537871996,535135223,540965861,541635828,555273585,4710345,1112468701,526292772,540943897,521309188,554438834,1067432176,515637107,624610925,838500256,533628152,684765227,1553342939,552069857,528510256,515226607,510143855,511073699,34703301,551012396,502611333,533376465,517093375,177400534,500758930	)


	elif [ $graph == "fb7" ]; then

		flow=(		495223)
		source=(	-485017601,-428225462,-387667519,-284168323,-198660092,-159880931,-149828109,-135272145,-88331784,-75663360,-74976118,-73678536,-65057729,-52877084,-30856526,-6088694,2730942,9022975,10721983,509400879,520566755,532795043,533770517,539770052,556649571,560246719,570838527,577531261,579293868,594371547,595763186,596182527,598969596,600089913,612533686,634782853,634858465,640999297,641370869,646687787,651355010,665349743,669746337,671681171,677177837,688676131,697100875,700071453,703107965,708151147,722326738,745750658,746759370,750432165,751752058,773979839,799888485,805758425,837508484,882805503,1013243874,1045961824,1072463435,1074360117,1083382500,1092924955,1111480694,1121340552,1124266069,1162678049,1167717167,1170705065,1173420288,1184838216,1185983714,1193254156,1199808675,1229220921,1236667137,1248628333,1250107807,1269150735,1286110187,1290439839,1293062677,1303713505,1311663497,1323762397,1341164239,1354009733,1384564959,1398750420,1405855142,1415926144,1426208197,1454676200,1475192155,1475323997,1484110625,1494978453,1503491526,1523692718,1531851164,1557495128,1568215358,1578107700,1578439901,1580490217,1584497799,1597852257,1618522101,1629698952,1654481553,1659529030,1660749489,1665831413,1666337798,1679220654,1679631447,1686055484,1690405266,1702068764,1713792888,1785588976,1786008866,1788936753,1797506452,1833753382)
		sink=(		-504549436,-432880368,-428204053,-383641962,-197937789,-187936146,-170272502,-151271516,-150397911,-90425754,-88710731,-79260168,-70320385,-69851290,-60354382,-48507997,-46401228,-210878,20903094,25411903,36600559,112100168,505265847,506403449,509571093,529632924,541437975,550651984,563913466,585878307,593387906,596878308,607054689,622242414,626915983,630590336,658192729,665147340,667669420,672915128,678706130,692998832,699676151,743334713,758289100,790237948,811786574,813725306,823237231,838500256,846935724,1067711290,1071826732,1074734575,1082104350,1082929715,1088545063,1105249101,1105428597,1115259817,1116751764,1131734222,1132255009,1171462865,1171541574,1188588435,1200984408,1208288355,1246599477,1252218639,1256544632,1262592475,1273099448,1287674236,1288414226,1300712548,1310581609,1313571337,1333522831,1336183995,1353395387,1360624035,1362065190,1367777558,1376103296,1376263818,1411211687,1436937862,1438690288,1443048892,1450774247,1466854596,1467984378,1473400205,1481148495,1489910685,1505132973,1526486908,1547305789,1559611397,1580774795,1586262566,1588991839,1594170185,1602819113,1605818700,1611065652,1615554253,1622725359,1625193301,1630642043,1631220559,1636834273,1639640723,1639870739,1639882167,1648404117,1650919529,1656382586,1663616479,1678181451,1715547625,1741780380,1788775221,1790805209,1796805669,1797265162,1820263496)

	elif [ $graph == "fb8" ]; then

		flow=(		111	)
		source=(	1256825718,1680193283,1254355749,725566630,628036559,1154262049,1287567700,1019347198,1386330080,647595590,1016409576,1160054265,-297393975,617312906,501113815,1051903798,1011330086,-513205938,83403227,501748137,526148732,1845638304,545161944,1027694997,1641711731,80502090,1013820033,728718060,523591787,552467102,1356229485,-466907931,6222954,-153424599,569383125,1530303989,1753253211,502891193,1122409801,1527017758,70801201,1372727754,596630542,725017597,1348325285,1444622002,1435021894,565840016,1261396999,-557754328,1441906839,803715768,1061283735,1815241411,-745202329,825405639,533737032,-579112199,1447918087,-566623604,1146852124,1176651657,-572533111,1277994508,-327365743,1166591721,-392259658,1477981110,1773611991,-536044742,1047367816,16410062,-437094625,1271431666,150200533,1090300317,1331420591,1497101867,-457905098,-124344101,698587243,546500670,18805485,615391154,506791864,1835857055,-709601618,1126492829,843029780,1061030784,1118425203,1563822015,-728805384,1005120291,1232108070,-174546520,1029000709,39103093,1793802067,-193507714,650115781,587509891,1069017637,683993148,1583125208,1223306205,81405477,677495764,1393860077,1108044729,1596519638,1667543347,557303962,1790335644,1704688111,1052070211,724505766,509179638,1723732360,695875245,-276170618,1659866382,1433598464,783799834,1597958364,541956347,528915859,-571066034,714611954,508272298,-350692592,1193723697,1376048836,-167245607,1089761717,1000987307,629463251,782360181,1455159809,1177914227,1634481853,-740294937,613786158,1162491635,755586358,1281439886,80506548,1172880151,1024327418,1785127405,769343611,-28459506,-419073023,1692807736,608790713,568128860,1112468701,1478870993,671777529,623071946,1551767463,800117505,1510051101,1169115645,-84317365,707743575,674106046,1734956577,1453442111,-62990726,565266143,740843120,608138557,1183825339,1273245979,1027560231,6857943,632793660,1171886859,1531851164,594021045,561382750,1437201337,-16986562,581941667,1072463435,-9256953,1600136827,1413817237,509325472,514232886,71202241,1271237899,1420026485,-237395665,1346167360,508866270,633787671,714459788,1482391217,1153458850,1084968089,1089943151,686081494,-283059434,507408851,680451171,1079914200,722546136,1227084749,695983246,1587814084,1252686974,-832006503,1263274240,1596107746,1428367176,665470499,801877318,1034427520,730048003,1305270711,88000944,1286753529,1805268084,527919168,673771152,1483383935,1586766264,1613982193,-40295422,-190317030,1354977839,1440429225,510211737,1157194630,521057173,-192706660,1309855628,1819784634,-456104568,1445841923,1259314735,1202281352,1151720068,1490871217,1244190389,77306623,1710949241,-83256111,1436580115,632700803,1540791745,599891201	)
		sink=(		502716683,30502478,1539821238,1158186078,501281789,-431722236,610694789,66104650,724896622,1086482313,591005517,1735197854,1224232862,-440885694,-225846613,1412624062,1434669743,1290439839,42805015,1328602472,823568795,1424692814,1530240919,1684895851,1180526536,1424987085,43005208,745380231,1398126424,1012301793,1004483627,1350050500,1402202629,1175505976,1610753330,1654776542,-478459781,1045814567,577862435,506991798,622470324,539218597,-88015072,778216348,655291961,-503335146,1350279208,1349628129,524590193,-123350673,715157261,1348706206,792670230,1041677121,1154336351,730991564,-840343581,1335609503,1165941900,1062595702,525295763,1063005658,795715386,507152197,-664148173,1188062514,1009057681,1493918474,1658769448,1244895035,1240300651,-738264591,-547303485,751990542,1555288141,1569340798,1338186771,516086447,803398536,547227864,1101006872,582857391,1585321628,1523677817,1071951145,827724836,595120254,1178711959,1755943894,1710606692,1182430486,1366577467,-694338172,526381750,532887141,1116163483,791482383,8703158,1023254399,9322460,613115475,735654586,559697676,1461825882,-537370725,1374633163,697480958,141601352,1664205557,1534391517,-570819110,-297660783,1149276811,1215590712,1150935998,-133704056,527904412,840820091,666817817,1289287374,-140222320,510756306,726556055,676152760,630916193,533590287,-117818968,758679361,555388920,1266803434,1022498715,708412244,1366241372,721116164,711026290,1463783676,1146566838,1606026964,-613165735,1365939941,529250084,1684782515,1849197257,835219685,536396259,882245295,-248058311,-539234051,1444540345,1152069251,-679931762,1175075536,565793401,23406481,-77444032,592016898,1025744924,-326693397,-519327341,535184332,733427753,1809320205,1198165286,-198542786,1122665999,1474458530,1720768864,-263566185,1797295605,522024050,-596259743,-192565758,1023522289,533881031,-219902293,3413064,600146153,1665439191,1563076723,1015588190,1656155137,609127998,1570029198,1036442894,8336700,1188939695,12808734,-226077822,1820749595,706780542,1074564329,563591385,764993261,1427405893,-192722985,77300216,1444742224,1520907753,1266663629,673537153,1022490378,1258200959,603584412,625822790,590966586,503569285,761074123,1375852431,-187030978,676264348,-50337282,1297005321,1433337706,1633728255,1349803075,1159033719,681432261,1291310302,620419373,1419505375,1064110313,31404578,1744394058,1348338525,1285851210,1583951721,1481176355,1622144285,-376217455,1079280955,-472745272,1449196024,1100584262,-234542048,670251364,1181799935,1440637987,1780960278,1810786775,555037992,726564613,1529113277,1332287799,1071784577,1841292596,560436503,45500154,-533041475,1175389321,1400088646,-394397324,1341585655,639062758,1156343259,1404005518	)

	else

		#for FB1
		flow=(		75		1094		2730		3186		2690		3001		3849		3014		2784		11	)
		source=(	815395409	83502502	514889626	533376465	599439719	627491178	618182405	606118442	618128852	815395409,83502502,514889626,533376465,599439719,627491178,618182405,606118442,618128852	)
		sink=(		836211725	1668200796	635606214	577286185	554548261	541757052	565457232	541858279	588271144	836211725,1668200796,635606214,577286185,554548261,541757052,565457232,541858279,588271144	)
	fi

	compile

	./run job -list
	out=${machine}.${algo}.${graph}.${nr}r.flow${flow[tc]}.ss${randss}.elen${elen}.sb${sbuf}.${suffix}
	echo "Output : ${out}.txt"

	./run jar main  				\
		-D mf.round=0				\
		-D mf.sources=${source[tc]}		\
		-D mf.sinks=${sink[tc]}			\
		-D mf.graph=$graph			\
		-D mf.comment=$out			\
		-D mf.debug=false			\
		-D mf.sink.excess=$usesink		\
		-D mf.excess.list.max=$maxexcess	\
		-D mf.delete.prev.results=true		\
		-D mf.rmi.host=compg36			\
		-D mf.reducers=$nr			\
		-D mf.random.source.sink=$randss	\
		-D mf.max.epath.length=$elen		\
		-D mf.zip.master=false			\
		-D mf.approx=0.95			\
		$algo 2>&1 | tee ${out}.txt

	website $out

	./run fs -rmr ${algo}/${graph}/${out}
}

function runssh {
	node=$1
	shift
	si=$1
	shift
	ei=$1
	shift
	for (( c=$si; c<=$ei; c++ ))
	do
		if [ "$v2" == "v" ]; then
			echo "${node}${c}"
		fi
		ssh ${node}${c} $@
	done
}

function runsshbg {
	node=$1
	shift
	si=$1
	shift
	ei=$1
	shift
	for (( c=$si; c<=$ei; c++ ))
	do
		if [ "$v2" == "v" ]; then
			echo "${node}${c}"
		fi
		ssh ${node}${c} $@ &
	done
}

function sshall {
	v1=$1
	shift
	v2=$1
	shift

	if [ "$v1" == "v" ]; then
		echo "compg0-50"
	fi
	runssh compg 0 6 $@
	runssh compg 11 19 $@
	runssh compg 24 50 $@
}

function processes {
	echo "compg41-50"
	for (( c=41; c<=50; c++ ))
	do
		ssh compg$c "ps aux > ~/proc_access$c"
		cat ~/proc_access$c | grep /usr/java | wc
	done
}

function memory {
	for (( c=41; c<=50; c++ ))
	do
		echo "compg$c"
		ssh compg$c "ps aux > ~/proc_compg$c"
		cat ~/proc_compg$c | grep /usr/java | ./trunc 110
	done
}

function clearnodes {
	v2=v
	runssh $1 $2 $3 "rm -fr /tmp/halim"
	runssh $1 $2 $3 "rm -fr /temp/halim"
	runssh $1 $2 $3 "export HADOOP_HOME=/home/h/halim/H3; H3/bin/hdfs namenode -format"
}

function cleartemp {
	v2=v
	runsshbg $1 $2 $3 "rm -fr /temp/halim"
}

if [ $1 == "nodes" ]; then
	shift
	if [ $1 = "stopall" ]
	then
		shift
		H3/bin/stop-dfs.sh
		H3/bin/stop-mapred.sh
	elif [ $1 = "reset" ]
	then
		shift
		./run nodes stopall
		./run killall
		clearnodes compg 41 50
		./run nodes startall
		./run job -list
	elif [ $1 = "cleartemp" ]
	then
		shift
		cleartemp compg 41 50
	elif [ $1 = "startall" ]
	then
		shift
		H3/bin/start-dfs.sh
		H3/bin/start-mapred.sh
	fi
elif [ $1 == "com" ]; then
	shift
	compile $@
elif [ $1 == "mf" ]; then
	shift
	runmf $@
elif [ $1 == "batchbfs" ]; then
	time gunzip -c /temp/db1r-full.txt.gz | ./run fs -put - bfs/fb8/yzcrawler
	./run mf bfs fb8 0 -1 splittable.compg21 300
elif [ $1 == "batch4" ]; then
	./run jar main ff.input.facebook /temp/db1f-full.txt.gz graph-ff-fb4
	./run mf ff2 fb4 0 -1 compg21 300 512

	time ./run jar main ff2 -D mf.input.facebook=true /temp/db1f-full.txt.gz fb4

elif [ $1 == "batchff1" ]; then
#	./run jar main ff1.input.facebook /temp/db16-full.txt.gz graph-ff-fb3

#	./run com
#	./run jar main ff1.input.facebook dbyy-full.txt.gz graph-ff1-fb1
	./run mf ff1 fb1 0 -1 s10c 45 100 512 true
	./run mf ff1 fb1 0 -1 s10b 45 100 1 true
	./run mf ff1 fb1 0 -1 s10a 45 100 1 false
	./run mf ff1 fb1 1 -1 s10a 45 100 1 false

	# the incremental augpath
	# the bi-directional search
	# the multiple excess paths

elif [ $1 == "batchpayload" ]; then
	./run mf ff6 fb3 0 -1 withpayload2x 45 111 10000 true
#	./run mf ff6 fb3 0 -1 withpayload4x 45 111 10000 true

elif [ $1 == "batch" ]; then
	./run mf ff8 fb3 0 -1 alpha1 45 1
	./run mf ff8 fb3 0 -1 alpha2 45 2
	./run mf ff8 fb3 0 -1 alpha3 45 3
	./run mf ff8 fb3 0 -1 alpha4 45 4
	./run mf ff8 fb3 0 -1 alpha5 45 5
	./run mf ff8 fb3 0 -1 alpha6 45 6
	./run mf ff8 fb3 0 -1 alpha7 45 7

#	./run jar main ff.input.facebook /temp/db1f-full.txt.gz graph-ff-fb4
#	./run mf ff fb4 0 -1 21n 300 512

#	./run nodes reset
#	time gunzip -c dbyy-full.txt.gz | ./run fs -put - bfs/fb1/yzcrawler
#	./run mf ff7 fb1 0 -1 21n 70
#	time gunzip -c /temp/db15-full.txt.gz | ./run fs -put - bfs/fb2/yzcrawler
#	./run mf ff7 fb2 0 -1 21n 300
#	time gunzip -c /temp/db16-full.txt.gz | ./run fs -put - bfs/fb3/yzcrawler
#	./run mf ff7 fb3 0 -1 21n 300
#	time gunzip -c /temp/db1f-full.txt.gz | ./run fs -put - bfs/fb4/yzcrawler
#	./run mf ff7 fb4 0 -1 21n 300
#	time gunzip -c /temp/db1h-full.txt.gz | ./run fs -put - bfs/fb7/yzcrawler
#	./run mf ff7 fb7 0 -1 21n 300
#	time gunzip -c /temp/db1r-full.txt.gz | ./run fs -put - ff6/fb8/yzcrawler
#	./run mf ff6 fb8 0 -1 21n 300
elif [ $1 == "batchflows" ]; then
	gunzip -c /temp/db1r-full.txt.gz | ./run fs -put - ff8/fb6/yzcrawler
	./run mf ff8 fb6 0 -1 alpha 50 3
	./run mf ff8 fb6 0 -1 alpha 50 4
	./run mf ff8 fb6 0 -1 alpha 50 5
#	./run mf ff6 fb8 0 1 compg23 300
elif [ $1 == "jar" ]; then
	shift
	H3/bin/hadoop jar mf.jar $@
elif [ $1 == "rmi" ]; then
	/usr/java/default/bin/rmiregistry &
	bash rmi8
elif [ $1 == "job" ]; then
	shift
	H3/bin/mapred job $@
elif [ $1 == "fs" ]; then
	shift
	H3/bin/hadoop fs $@
elif [ $1 == "web" ]; then
	shift
	website $@
elif [ $1 == "space" ]; then
	shift
	sshall v x "df -h | grep /temp"
elif [ $1 == "mem" ]; then
	shift
	memory
elif [ $1 == "proc" ]; then
	shift
	processes
elif [ $1 == "killall" ]; then
	shift
	sshall v x "killall -u halim -s 9"
elif [ $1 == "rmalltemp" ]; then
	shift
	sshall v x "rm -fr /temp/halim"
else
	H3/bin/hadoop $@
fi

# gunzip -c dbyy-full.txt.gz | ./run fs -put - ff4/fb1/yzcrawler
